// Copyright (c) Huawei Technologies Co., Ltd. 2025. All rights reserved.
// This source file is part of the Cangjie project, licensed under Apache-2.0
// with Runtime Library Exception.
//
// See https://cangjie-lang.cn/pages/LICENSE for license information.

// (CJNATIVE and not Windows) DEPENDENCE: ../../Cangjie.h
// (CJNATIVE and not Windows) DEPENDENCE: ../%n
// (CJNATIVE and not Windows) RUN-EXEC-0: %cd %n && mkdir -p out
// (CJNATIVE and Linux) RUN-EXEC-0: %cd %n && %clang -shared %objc_flags %objc_base_libs %objc_arc_opt src/objc/M.m -o out/libocworld.so -Lout %cangjie_runtime_link -I../ -Isrc/objc %include_cangjie -lcangjie-runtime -ldl
// (CJNATIVE and Darwin) RUN-EXEC-0: %cd %n && %clang -dynamiclib %modules_opt %objc_arc_opt src/objc/M.m -o out/libocworld.dylib -Lout %cangjie_runtime_link -I../ -Isrc/objc %include_cangjie -lcangjie-runtime
// (CJNATIVE and Linux) RUN-EXEC-0: %cd %n && %compiler %compile_shared_lib_opt %overflowOpt -p src/cjworld %import_objc_interop -o out
// (CJNATIVE and Darwin) RUN-EXEC-0: %cd %n && %compiler %compile_shared_lib_opt %overflowOpt -p src/cjworld %import_objc_interop -o out --link-options "-Lout -locworld -framework Foundation"
// (CJNATIVE and Linux) RUN-EXEC-0: %cd %n && sed -i "s/\.dylib/\.so/g" src/objc/*
// (CJNATIVE and Linux) RUN-EXEC-0: %cd %n && %clang %objc_flags %objc_base_libs %objc_arc_opt src/objc/main.m -o out/main -Lout %cangjie_runtime_link -I../ -Isrc/objc %include_cangjie -lcjworld -locworld -lcangjie-runtime -ldl
// (CJNATIVE and Darwin) RUN-EXEC-0: %cd %n && %clang %modules_opt %objc_arc_opt src/objc/main.m -o out/main -Lout %cangjie_runtime_link -I../ -Isrc/objc %include_cangjie -lcjworld -locworld -lcangjie-runtime
// (CJNATIVE and not Windows) RUN-EXEC-PIPE: %cd %n/out && %run ./main 2>& 1 | compare %f

// ASSERT: scan NSObject
// ASSERT: scan 3.140000
// ASSERT: scan M
// ASSERT: scan 3.140000
// ASSERT: scan 45
