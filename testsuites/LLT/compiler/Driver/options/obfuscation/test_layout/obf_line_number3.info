// Copyright (c) Huawei Technologies Co., Ltd. 2025. All rights reserved.
// This source file is part of the Cangjie project, licensed under Apache-2.0
// with Runtime Library Exception.
//
// See https://cangjie-lang.cn/pages/LICENSE for license information.

// DEPENDENCE: ./test
//  EXEC: cp -r test/* . && rm -r test
//  EXEC: %compiler mymod/mod1/mod1.cj %compile_shared_lib_opt %output_dir_opt mymod --fobf-layout --obf-sym-output-mapping a.map --obf-sym-prefix=a
//  EXEC: %compiler mymod/mod2/mod2.cj %compile_shared_lib_opt %output_dir_opt mymod --fobf-layout --obf-sym-output-mapping b.map --obf-sym-prefix=b
//  EXEC: %compiler -o test -lmymod.mod1 -lmymod.mod2 %import_path_opt=mymod -Lmymod --fobf-layout --obf-sym-input-mapping a.map,b.map --obf-sym-prefix=c -p .
//  EXEC: cat default.obf.map
//  EXEC-1: LD_LIBRARY_PATH=mymod:${LD_LIBRARY_PATH} ./test 2>&1 > log
//  EXEC: sym=$(cat ./default.obf.map | grep 'cj_entry\$' | cut -d " " -f 2) && sed -i -e "/$sym/d" ./log
//  EXEC: sym=$(cat ./default.obf.map | grep 'user.main' | cut -d " " -f 2) && sed -i -e "/$sym/d" ./log
//  EXEC: cat log | compare %f
// ASSERT: scan-not :0