/*
 * Copyright (c) Huawei Technologies Co., Ltd. 2025. All rights reserved.
 * This source file is part of the Cangjie project, licensed under Apache-2.0
 * with Runtime Library Exception.
 * 
 * See https://cangjie-lang.cn/pages/LICENSE for license information.
 */

// DEPENDENCE: ../%n
// (Windows)EXEC: copy NUL output
// (Unix)EXEC: cd %n && touch output
// EXEC-1: cd %n/primary && %cjpm run --enable-features=user.primary.a 2>&1 > output
// EXEC-1: cd %n/primary && %cjpm run --enable-features=user.primary.b 2>&1 >> output
// EXEC: cd %n/primary && echo "public func h1(): Unit { f1(); f2(); g1(); g2() }" >> common/common.cj
// EXEC-1: cd %n/primary && %cjpm run --enable-features=user.primary.a 2>&1 >> output
// (Windows)EXEC: cd %n && type output | compare %f
// (Unix)EXEC: cd %n && cat output | compare %f
// ASSERT: scan-2 undeclared identifier 'g1'
// ASSERT: scan-2 undeclared identifier 'g2'
// ASSERT: scan-2 undeclared identifier 'h1'
// ASSERT: scan-3 cjpm run failed
